<!DOCTYPE html>
<html lang="en">
<head>
</head>
    <%- include('./head') -%>
<body>
    <main>
        <%- include('./productsContainerById') -%>
        <% if (admin) { %>
            <%- include('./productFormUpdate') -%>
        <% } %>
    </main>
    <script>

        const agregarProdAlCarrito = async (productId, name, description, code, stock, price,thumbnail) =>{
            const idCart = await fetch(`/api/carrito/`, {
                method: 'POST',
            })
            const idC = await idCart.json()
            const urlencoded = new URLSearchParams({
                "productId": productId,
                "timestamp": Date.now(),
                "name": name,
                "description": description,
                "code": code,
                "stock": stock,
                "price": price,
                "thumbnail": thumbnail,
            });
            const options = {
                method: 'POST',
                body: urlencoded,
            }
            fetch(`/api/carrito/${idC}/productos`, options)
                .then(response => response.json())
                .then(response => console.log(response))
                .catch(err => console.error(err));
        }


        const editProduct = async (id) => {
            const name = document.getElementById('name').value
            const description = document.getElementById('description').value
            const code = document.getElementById('code').value
            const stock = document.getElementById('stock').value
            const price = document.getElementById('price').value
            const thumbnail = document.getElementById('thumbnail').value

            const prodAct = {
                name,
                description,
                code,
                stock,
                price,
                thumbnail
            }
            const options = {
                method: 'PUT',
                body: JSON.stringify(prodAct)
            }
            fetch('/prueba', options)
                .then(response => response.json())
                .then(response => console.log(response))
                .catch(err => console.error(err));
        }
    </script>
</body>
</html>